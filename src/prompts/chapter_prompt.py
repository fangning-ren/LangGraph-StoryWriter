
CHAPTER_GENERATION_STAGE1_PROMPT_OLD = """
你现在是一个小说作家，你正在撰写一部小说。
这是真正写作的时候，请写出章节{_ChapterNum}。不要写大纲，不要罗列情节！直接写小说。本章不得少于 1000 字。
{_TotalChapters} 基于以下章节大纲和之前的所有章节。
以下是该小说的所有背景信息。
<BACKGROUND>
{_Background}
</BACKGROUND>

请参考用户的需求，包括风格和题材，以及人称等。关注之前的章节，并确保两者衔接流畅。写作必须与上一章衔接良好，并流畅地衔接下一章（因此请尽量遵循大纲）！这很重要。

以下是上一章的总结，用于帮助您实现更好的衔接：
<CHAPTER_SUMMARY>
{_LastChapterSummary}
</CHAPTER_SUMMARY>

以下是本章的大纲：
<CHAPTER_OUTLINE>
{_Outline}
</CHAPTER_OUTLINE>

写作时，请参考以下建议，帮助您撰写第 {_ChapterNum} 章（请确保只撰写第{_ChapterNum}章，这非常的重要）：(绝对不要参考大纲写出所有章节的内容)
- 节奏：
- 您是否会跳过几天？总结事件？不要这样做，添加场景来详细描述它们。
- 故事是否在某些情节点上仓促展开，而过分关注其他情节点？
- 流程：每个章节是否衔接流畅？情节对读者来说是否合乎逻辑？故事是否具有特定的叙事结构？叙事结构是否贯穿始终？
- 类型：故事是什么类型？哪种语言适合该类型？场景是否支持该类型？
要以文学性的方式表达，而不是以markdown格式罗列。
"""

CHAPTER_GENERATION_STAGE1_PROMPT = """
你现在是一个小说作家，你正在撰写一部小说。
这是真正写作的时候，请写出章节{_ChapterNum}。不要写大纲，不要罗列情节！直接写小说。本章不得少于 1000 字。
{_TotalChapters} 基于以下章节大纲和之前的所有章节。
以下是该小说的所有背景信息。
<BACKGROUND>
{_Background}
</BACKGROUND>

请参考用户的需求，包括风格和题材，以及人称等。关注之前的章节，并确保两者衔接流畅。写作必须与上一章衔接良好，并流畅地衔接下一章（因此请尽量遵循大纲）！这很重要。

写作时，请参考以下建议，帮助您撰写第 {_ChapterNum} 章（请确保只撰写第{_ChapterNum}章，这非常的重要）：(绝对不要参考大纲写出所有章节的内容)
- 节奏：
- 您是否会跳过几天？总结事件？不要这样做，添加场景来详细描述它们。
- 故事是否在某些情节点上仓促展开，而过分关注其他情节点？
- 流程：每个章节是否衔接流畅？情节对读者来说是否合乎逻辑？故事是否具有特定的叙事结构？叙事结构是否贯穿始终？
- 类型：故事是什么类型？哪种语言适合该类型？场景是否支持该类型？
要以文学性的方式表达，而不是以markdown格式罗列。

以下是本章的大纲：
<CHAPTER_OUTLINE>
{_Outline}
</CHAPTER_OUTLINE>

以下是上一章的总结，用于帮助您实现更好的衔接：
<CHAPTER_SUMMARY>
{_LastChapterSummary}
</CHAPTER_SUMMARY>

以下是对如何过渡到下一章（不是本章）的提示：
<CHAPTER_TIPS>
{_NextChapterSummary}
</CHAPTER_TIPS>

以下是上一章的本体。如果提供了，就依照它往后写；如果没有提供，就从头开始写。
{_LastChapter}
"""

CHAPTER_GENERATION_STAGE2_PROMPT = """
请根据以下标准和之前的章节，为下一章（共 {_TotalChapters} 章）{_ChapterNum} 撰写人物发展。
写作必须自然、顺畅地衔接上一章，并为下一章做好铺垫。请特别注意情节、人物心理、环境变化的连贯性，确保读者不会感到突兀或断裂。
以下是该小说的所有背景信息。
<BACKGROUND>
{_Background}
</BACKGROUND>

不要删减内容，而应在此基础上进行扩展，使内容更长、更详细。本章不得少于 1000 字。


### **参考信息**
以下是当前章节**前一章** （第{_LastChapterNum}章）的总结，用于帮助您实现更好的衔接：
<CHAPTER_SUMMARY>
{_LastChapterSummary}
</CHAPTER_SUMMARY>

以下是当前章节**下一章** （第{_NextChapterNum}章）的总结，用于帮助您实现更好的衔接：
<CHAPTER_SUMMARY>
{_NextChapterSummary}
</CHAPTER_SUMMARY>

以下是本章的大纲：
<CHAPTER_OUTLINE>
{_Outline}
</CHAPTER_OUTLINE>

以下是本章的草稿，供您进行修改：
<CHAPTER_PLOT>
{_Chapter}
</CHAPTER_PLOT>

在扩展上述工作时，请牢记以下标准：
- 语言风格：保持文学性的语言风格，保持本章的语言风格。不要写成markdown格式的总结。
- 人物：本章中的人物是谁？他们对彼此意味着什么？他​​们之间的关系如何？是否存在冲突？是否存在紧张关系？这些人物走到一起有什么原因吗？
- 发展：每个人物的目标是什么？他们是否实现了这些目标？人物是否有变化并展现出成长？每个人物的目标是否会随着故事的发展而变化？
- 细节：如何描述事物？是否重复？词语选择是否与场景相符？我们描述的事物是过多还是过少？

不要直接回答这些问题，而是让你的写作含蓄地回答它们。（展现，而非诉说）

- “在扩展本章时，请特别注意衔接技巧，包括但不限于：
- 情节衔接：确保上一章的事件自然过渡到本章，避免突然转折或缺乏铺垫。
- 人物心理衔接：上一章的情绪、动机是否延续？是否有合理的变化？
- 环境衔接：场景是否连贯？是否有合理的时间、地点变化？
- 语言衔接：使用适当的过渡句，让章节之间的阅读体验更加流畅。”

以下是上一章的总结，请确保本章的开头自然承接这一内容，并在必要时回顾关键事件，让读者能够顺利跟上故事的进展：
请只修改第 {_ChapterNum} 章，不要添加任何其他章节或内容。这很重要。
请记住，玩得开心，发挥创造力，并改善第 {_ChapterNum} 章的角色发展（确保你只写这一章）！
"""


CHAPTER_GENERATION_STAGE3_PROMPT = """
请根据以下条件和所有之前的章节大纲，修改当前章节（第 {_ChapterNum} 章）。请调整当前章节以保持合适的节奏。
以下是该小说的所有背景信息。
<BACKGROUND>
{_Background}
</BACKGROUND>
 
请关注之前的章节，并确保两者无缝衔接。写作必须与上一章衔接良好，并流畅地衔接下一章（因此请尽量遵循提纲）！  

在这一步中，你可以适当地删除一些内容，但要保证本章仍保持至少60%的原始内容。请确保本章的长度在1000字以上。

### **参考信息**
以下是当前章节**前一章** （第{_LastChapterNum}章）的总结，用于帮助您实现更好的衔接：
<CHAPTER_SUMMARY>
{_LastChapterSummary}
</CHAPTER_SUMMARY>

以下是当前章节**下一章** （第{_NextChapterNum}章）的总结，用于帮助您实现更好的衔接：
<CHAPTER_SUMMARY>
{_NextChapterSummary}
</CHAPTER_SUMMARY>

以下是本章（第 {_ChapterNum} 章）的大纲：
<CHAPTER_OUTLINE>
{_Outline}
</CHAPTER_OUTLINE>

以下是第 {_ChapterNum} 章的草稿，供您进行修改：
<CHAPTER_PLOT>
{_Chapter}
</CHAPTER_PLOT>

在这一步中，你可以适当地删除一些内容，比如：
 - 删除对不必要细节的描述和修辞，让读者的注意力集中在重要的情节和角色发展上。
 - 在不改变含义的前提下，删除过于冗余的描述，如重复地描述同一物体。
 - 删除重复的，本质上一样的情节。如某两个连续的情节中人物没变，行为没变，心理没变，只是个别具体细节不同。（如吃的东西不一样）
 - 删除与大纲和故事元素矛盾的内容。

注意：
 - 请不要删除任何重要的情节或角色发展。
 - 不要删除关键物品或事件。
 - 谨慎修改本章的开头和结尾，以确保它们与前后章节的衔接流畅。

"""

CHAPTER_GENERATION_STAGE4_PROMPT = """
请根据以下条件和所有之前的章节，在第 {_ChapterNum} 章（共 {_TotalChapters} 章）中**丰富对话、动作和环境细节**，使故事更加生动、沉浸。 
以下是该小说的所有背景信息。
<BACKGROUND>
{_Background}
</BACKGROUND>
 
请关注之前的章节，并确保两者无缝衔接。写作必须与上一章衔接良好，并流畅地衔接下一章（因此请尽量遵循提纲）！  

按照以下要求修改本章，本章的字数应与前一章**接近**，不得少于前一章的60%，不得少于 1000 字。  

### **参考信息**
以下是当前章节**前一章** （第{_LastChapterNum}章）的总结，用于帮助您实现更好的衔接：
<CHAPTER_SUMMARY>
{_LastChapterSummary}
</CHAPTER_SUMMARY>

以下是当前章节**下一章** （第{_NextChapterNum}章）的总结，用于帮助您实现更好的衔接：
<CHAPTER_SUMMARY>
{_NextChapterSummary}
</CHAPTER_SUMMARY>

以下是本章（第 {_ChapterNum} 章）的大纲：
<CHAPTER_OUTLINE>
{_Outline}
</CHAPTER_OUTLINE>

以下是第 {_ChapterNum} 章的草稿，供您进行修改：
<CHAPTER_PLOT>
{_Chapter}
</CHAPTER_PLOT>

### **修改要求**
请特别关注以下方面，使故事更加生动、细腻：
- **语言风格**：
  - 保持文学性的语言风格。不要写成markdown格式的总结。

- **对话**：
  - 让角色的对话**符合他们的性格、情绪和当前情境**。
  - **避免单调的对话**，可以加入**停顿、犹豫、打断、重复、语气变化**等，使交流更加真实。
  - **使用肢体语言和动作**来补充对话，例如：“他皱了皱眉，低声说道……”而不是单纯写“他说”。
  - **考虑场景节奏**：如果角色在奔跑，对话应短促；如果在享受晚餐，对话应更悠闲。

- **动作**：
  - 让角色的**行为反映他们的情绪和心理**，例如：“她紧握拳头，指甲几乎刺入掌心”比“她生气了”更有表现力。
  - **避免静态场景**，让角色在对话时有**互动**，例如：“他推开窗户，望向远方”而不是“他说完后沉默”。

- **环境细节**：
  - **让环境影响角色**，例如：“狂风呼啸，使他的声音几乎被吞没”比“他大声说话”更有沉浸感。
  - **使用感官描写**（视觉、听觉、触觉、嗅觉、味觉）来增强氛围，例如：“空气中弥漫着潮湿的泥土气息”比“这里很潮湿”更生动。
  - **删除冗余修辞**，一句话中不能使用超过两个比喻拟人等修辞手法，避免拖慢节奏。

- **节奏控制**：
  - **避免跳过时间**，不要直接总结事件，而是**添加场景**来详细说明。
  - **确保故事推进自然**，不要在某些情节点上仓促展开，而过分关注其他情节点。

### **最终目标**
请确保：
  **对话自然、富有情感，并结合动作和环境**。  
  **角色的行为和心理变化符合情境**。  
  **场景细节丰富，使读者能够沉浸其中**。  
  **章节与上一章和下一章衔接流畅**。  

此外，请删除大纲中可能仍存在于章节中的任何标题，包括场景，章节等。 请只修改第 {_ChapterNum} 章，不要添加任何其他章节或内容。要以文学性的方式表达，而不是以markdown格式罗列。

记住，玩得开心，发挥创意，并为第 {_ChapterNum} 章添加更多**对话、动作和环境细节**（确保只写这一章）！

"""


CHAPTER_REVISION_PROMPT = """
评论家们已经审阅了您的章节草稿，并提供了反馈和建议。
请根据他们的反馈和建议对章节进行修改。

以下是用户的需求，需要您特别注意：
<USER_PROMPT>
{_Prompt}
</USER_PROMPT>

以下是全文的大纲，供您参考：
<OUTLINE>
{_Outline}
</OUTLINE>

以下是上一章(第 {_LastChapterNum} 章)的总结，用于帮助您实现更好的衔接：
<LAST_CHAPTER_SUMMARY>
{_LastChapterSummary}
</LAST_CHAPTER_SUMMARY>

以下是下一章(第 {_NextChapterNum} 章)的总结，用于帮助您实现更好的衔接：
<NEXT_CHAPTER_SUMMARY>
{_NextChapterSummary}
</NEXT_CHAPTER_SUMMARY>

以下是本章（第 {_ChapterNum} 章）的章节大纲，供您参考：
<CHAPTER_OUTLINE>
{_ChapterOutline}
</CHAPTER_OUTLINE>

以下是您的章节草稿：

<CHAPTER_CONTENT>
{_Chapter}
</CHAPTER_CONTENT>

评论家的反馈如下：
<FEEDBACK>
{_Feedback}
</FEEDBACK>

请参考<FEEDBACK>和</FEEDBACK>之间的内容，修改您位于<CHAPTER_CONTENT>和</CHAPTER_CONTENT>之间的章节内容。

请勿对修改内容进行反思，只需根据反馈和提示标准撰写改进后的章节即可。不要体现你的思考，也不要体现你的修改过程，因为没有人会看。直接写出修改后的章节内容。要以文学性的方式表达，而不是以markdown格式罗列。

您需要做的事情：
- 根据评论家的反馈和建议，修改章节内容。
- 确保章节内容与本章大纲一致。
- 确保章节内容能与上一章(第 {_LastChapterNum} 章)和下一章(第 {_NextChapterNum} 章)无缝衔接。
- 确保章节内容符合小说的整体风格和主题。
- 以文学性的方式表达。

您不能够做的事情：
- 不要留下任何修改痕迹或评论。
- 不要包含其它章节的内容。
- 不要以markdown格式罗列章节内容。

"""

CHAPTER_EDIT_PROMPT = """
<OUTLINE>
{_Outline}
</OUTLINE>

<CHAPTER>
{_Chapter}
</CHAPTER>

根据上述小说和大纲，请编辑第 {i} 章，以使其与故事的其余部分相适应。
"""

CHAPTER_SCRUB_PROMPT = """
<CHAPTER>
{_Chapter}
</CHAPTER>

鉴于以上章节，请对其进行整理，使其符合出版条件。
也就是说，请删除所有剩余的提纲，编辑评论，您的笔记和评论，不必要的标题，等等，只保留完整的故事。要以文学性的方式表达，而不是以markdown格式罗列。

请勿对您的任务进行评论，因为您的输出将是最终的印刷版本。
"""